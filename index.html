<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Performance Visualization | ML Analytics</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>Student Performance Analytics</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#overview" class="nav-link">Overview</a></li>
                <li><a href="#eda" class="nav-link">EDA</a></li>
                <li><a href="#models" class="nav-link">Models</a></li>
                <li><a href="#insights" class="nav-link">Insights</a></li>
                <li><a href="#predict" class="nav-link">Predict</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="overview" class="hero">
        <div class="hero-content">
            <h1>Understanding Student Academic Performance</h1>
            <p class="subtitle">An interactive machine learning visualization for CS-GY 9223: Visualization for Machine Learning</p>
            <div class="hero-stats">
                <div class="stat">
                    <h3 id="hero-students">999</h3>
                    <p>Students</p>
                </div>
                <div class="stat">
                    <h3 id="hero-features">27</h3>
                    <p>Features</p>
                </div>
                <div class="stat">
                    <h3 id="hero-models">8</h3>
                    <p>ML Models</p>
                </div>
                <div class="stat">
                    <h3 id="hero-best-r2">0.82</h3>
                    <p>Best R¬≤ Score</p>
                </div>
            </div>
        </div>
        <div class="hero-background"></div>
    </section>

    <!-- Problem Statement removed per request -->

    <!-- EDA Section -->
    <section id="eda" class="section eda-section">
        <div class="container">
            <h2>Exploratory Data Analysis</h2>
            
            <!-- Dataset Overview -->
            <div class="subsection">
                <h3>Dataset Overview</h3>
                <div class="grid grid-3">
                    <div class="info-card">
                        <h4>Total Records</h4>
                        <p id="ds-total-records" class="stat-value">999</p>
                    </div>
                    <div class="info-card">
                        <h4>Total Features</h4>
                        <p id="ds-total-features" class="stat-value">27</p>
                    </div>
                    <div class="info-card">
                        <h4>Target Variable</h4>
                        <p id="ds-target-variable" class="stat-value">Semester GPA</p>
                    </div>
                </div>
            </div>

            <!-- Feature Categories -->
            <div class="subsection">
                <h3>Feature Categories</h3>
                <div class="feature-categories">
                    <div class="category">
                        <h4><i class="fas fa-graduation-cap"></i> Academic</h4>
                        <ul>
                            <li>Previous Semester GPA</li>
                            <li>Attendance Percentage</li>
                            <li>English Proficiency Score</li>
                        </ul>
                    </div>
                    <div class="category">
                        <h4><i class="fas fa-clock"></i> Behavioral</h4>
                        <ul>
                            <li>Study Hours/Week</li>
                            <li>Sleep Hours/Day</li>
                            <li>Screen Time</li>
                            <li>Library Usage</li>
                        </ul>
                    </div>
                    <div class="category">
                        <h4><i class="fas fa-heart"></i> Wellbeing</h4>
                        <ul>
                            <li>Stress Level</li>
                            <li>Homesickness</li>
                            <li>Social Support</li>
                        </ul>
                    </div>
                    <div class="category">
                        <h4><i class="fas fa-globe"></i> Demographic</h4>
                        <ul>
                            <li>Gender, Race/Ethnicity</li>
                            <li>Country of Origin</li>
                            <li>Visa Type</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Correlation Analysis -->
            <div class="subsection">
                <h3>Feature Correlation with GPA</h3>
                <p class="description">Which factors are most strongly associated with semester GPA?</p>
                <div class="filters">
                    <label for="filter-gender">Filter by Gender:</label>
                    <select id="filter-gender">
                        <option value="all">All</option>
                    </select>

                    <label for="filter-country">Filter by Country:</label>
                    <select id="filter-country">
                        <option value="all">All</option>
                    </select>

                    <button id="filter-reset" class="btn">Reset Filters</button>
                </div>
                <div style="margin: 1em 0;">
                    <label for="chart-type-toggle">Chart Type:</label>
                    <select id="chart-type-toggle">
                        <option value="bar">Bar Chart</option>
                        <option value="heatmap">Heatmap</option>
                    </select>
                </div>
                <div id="correlation-chart" class="chart-container"></div>
            </div>

            <!-- Embedding / Clusters -->
            <div class="subsection">
                <h3>Student Embedding (UMAP / t-SNE)</h3>
                <p class="description">Visualize student clusters ‚Äî brush to select students and link to other charts.</p>
                <div id="embedding-plot" class="chart-container" style="min-height:420px;"></div>
            </div>

            <!-- Distribution Analysis -->
            <div class="subsection">
                <h3>GPA Distribution</h3>
                <div id="distribution-chart" class="chart-container"></div>
            </div>

            <!-- Top Positive/Negative Factors -->
            <div class="subsection">
                <div class="grid grid-2">
                    <div>
                        <h3>üü¢ Positive Factors</h3>
                        <div id="positive-factors" class="factors-list"></div>
                    </div>
                    <div>
                        <h3>üî¥ Negative Factors</h3>
                        <div id="negative-factors" class="factors-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Model Comparison Section -->
    <section id="models" class="section models-section">
        <div class="container">
            <h2>Machine Learning Models</h2>
            
            <!-- Model Performance Comparison -->
            <div class="subsection">
                <h3>Model Performance Comparison</h3>
                <p class="description">We trained 8 different regression models to predict semester GPA. Here's how they compare:</p>
                
                <div class="model-cards">
                    <div class="model-card best-model">
                        <div class="model-badge">üèÜ Best Model</div>
                        <h4 id="best-model-name">Not available</h4>
                        <div class="metrics">
                            <div class="metric">
                                <span class="label">R¬≤ Score (Test)</span>
                                <span class="value" id="best-model-r2">Not available</span>
                            </div>
                            <div class="metric">
                                <span class="label">RMSE (Test)</span>
                                <span class="value" id="best-model-rmse">Not available</span>
                            </div>
                            <div class="metric">
                                <span class="label">MAE</span>
                                <span class="value" id="best-model-mae">Not available</span>
                            </div>
                        </div>
                        <p class="description" id="best-model-desc">Model performance data not available.</p>
                    </div>

                    <div class="model-card">
                        <h4 id="model-2-name">Not available</h4>
                        <div class="metrics">
                            <div class="metric">
                                <span class="label">R¬≤ Score</span>
                                <span class="value" id="model-2-r2">Not available</span>
                            </div>
                            <div class="metric">
                                <span class="label">RMSE</span>
                                <span class="value" id="model-2-rmse">Not available</span>
                            </div>
                        </div>
                    </div>

                    <div class="model-card">
                        <h4 id="model-3-name">Not available</h4>
                        <div class="metrics">
                            <div class="metric">
                                <span class="label">R¬≤ Score</span>
                                <span class="value" id="model-3-r2">Not available</span>
                            </div>
                            <div class="metric">
                                <span class="label">RMSE</span>
                                <span class="value" id="model-3-rmse">Not available</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance charts: R¬≤ and RMSE side-by-side, SHAP summary below -->
            <div class="subsection">
                <div class="grid grid-2">
                    <div>
                        <h3>R¬≤ Scores Across Models</h3>
                        <div id="r2-chart" class="chart-container"></div>
                    </div>
                    <div>
                        <h3>RMSE Across Models</h3>
                        <div id="rmse-chart" class="chart-container"></div>
                    </div>
                </div>
                <div style="margin-top:1.25rem;">
                    <h3>SHAP Summary (Model Explainability)</h3>
                    <p class="description">If available, SHAP mean absolute values show per-feature contribution to predictions.</p>
                    <div id="shap-summary" class="chart-container"></div>
                </div>
            </div>

            <!-- Feature Importance -->
            <div class="subsection">
                <h3>Feature Importance (Top 10)</h3>
                <p class="description">Which features does our best model rely on most for predictions?</p>
                <div id="feature-importance" class="chart-container"></div>
            </div>

            <!-- SHAP summary removed: SHAP visualization disabled to avoid empty/missing displays. -->

            <!-- Model Interpretation -->
            <div class="subsection">
                <h3>Model Insights</h3>
                <div class="insights-grid grid-3">
                    <div class="insight-card">
                        <i class="fas fa-lightbulb"></i>
                        <h4>Previous GPA is Key</h4>
                        <p>Previous semester GPA is the strongest predictor of current performance, showing strong academic continuity.</p>
                    </div>
                    <div class="insight-card">
                        <i class="fas fa-book"></i>
                        <h4>Study Hours Matter</h4>
                        <p>Students who study 25+ hours per week show significantly higher GPAs than those studying <10 hours.</p>
                    </div>
                    <div class="insight-card">
                        <i class="fas fa-moon"></i>
                        <h4>Sleep is Critical</h4>
                        <p>Sleep hours are inversely correlated with stress and strongly related to academic performance.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Insights Section -->
    <section id="insights" class="section insights-section">
        <div class="container">
            <h2>Key Findings & Patterns</h2>
            
            <!-- Main Insights -->
            <div class="insights-grid grid-2">
                <div class="large-insight">
                    <h3>üìä The GPA Distribution</h3>
                    <div id="gpa-stats" class="stat-box">
                        <div class="stat-item">
                            <span>Mean GPA</span>
                            <strong>2.52</strong>
                        </div>
                        <div class="stat-item">
                            <span>Median GPA</span>
                            <strong>2.51</strong>
                        </div>
                        <div class="stat-item">
                            <span>Std Dev</span>
                            <strong>0.43</strong>
                        </div>
                        <div class="stat-item">
                            <span>Range</span>
                            <strong>1.98 - 3.98</strong>
                        </div>
                    </div>
                </div>

                <div class="large-insight">
                    <h3>üéØ Key Success Factors</h3>
                    <ol class="success-factors">
                        <li><strong>Previous GPA (r=0.89)</strong> - Historical performance is the best predictor</li>
                        <li><strong>Study Hours (r=0.67)</strong> - More study time = higher GPA</li>
                        <li><strong>Attendance (r=0.58)</strong> - Showing up matters significantly</li>
                        <li><strong>Sleep Hours (r=0.45)</strong> - Well-rested students perform better</li>
                        <li><strong>English Proficiency (r=0.42)</strong> - Language skills support success</li>
                    </ol>
                </div>
            </div>

            <!-- Risk Factors -->
            <div class="subsection">
                <h3>‚ö†Ô∏è Risk Indicators</h3>
                <div class="grid grid-3">
                    <div class="risk-card danger">
                        <h4>High Stress</h4>
                        <p>Students with stress levels >8 have 0.31 lower GPA on average</p>
                    </div>
                    <div class="risk-card danger">
                        <h4>Low Attendance</h4>
                        <p>Attendance <60% correlates with 0.48 lower GPA</p>
                    </div>
                    <div class="risk-card danger">
                        <h4>Inadequate Sleep</h4>
                        <p>Students sleeping <5 hours show higher stress and lower performance</p>
                    </div>
                </div>
            </div>

            <!-- Surprising Patterns -->
            <div class="subsection">
                <h3>üí° Interesting Patterns</h3>
                <div class="patterns-container">
                    <div class="pattern">
                        <h4>Geographic Diversity</h4>
                        <p>Students from different countries show varying patterns in work hours, family support, and stress levels, but GPA variations are explained more by behavioral factors.</p>
                    </div>
                    <div class="pattern">
                        <h4>Financial Impact</h4>
                        <p>Higher family income correlates with better access to resources, but scholarship students often have high motivation and competitive GPAs.</p>
                    </div>
                    <div class="pattern">
                        <h4>Work-Life Balance</h4>
                        <p>Students working 15+ hours/week show lower study hours, but some manage to maintain high GPA through efficient time management.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Prediction Tool -->
    <section id="predict" class="section predict-section">
        <div class="container">
            <h2>Interactive GPA Predictor</h2>
            <p class="subtitle">Adjust student characteristics to see predicted semester GPA</p>

            <div class="prediction-tool">
                <!-- Input Form -->
                <div class="input-form">
                    <div class="form-group">
                        <label for="prev-gpa">Previous Semester GPA (0-4.0)</label>
                        <input type="range" id="prev-gpa" min="0" max="4" step="0.1" value="2.5" class="slider">
                        <span class="slider-value" id="prev-gpa-value">2.5</span>
                    </div>

                    <div class="form-group">
                        <label for="study-hours">Study Hours per Week (0-50)</label>
                        <input type="range" id="study-hours" min="0" max="50" step="1" value="20" class="slider">
                        <span class="slider-value" id="study-hours-value">20</span> hours
                    </div>

                    <div class="form-group">
                        <label for="attendance">Attendance Percentage (0-100)</label>
                        <input type="range" id="attendance" min="0" max="100" step="1" value="75" class="slider">
                        <span class="slider-value" id="attendance-value">75</span>%
                    </div>

                    <div class="form-group">
                        <label for="sleep-hours">Sleep Hours per Day (0-10)</label>
                        <input type="range" id="sleep-hours" min="0" max="10" step="0.5" value="6" class="slider">
                        <span class="slider-value" id="sleep-hours-value">6</span> hours
                    </div>

                    <div class="form-group">
                        <label for="stress-level">Stress Level (1-10)</label>
                        <input type="range" id="stress-level" min="1" max="10" step="1" value="5" class="slider">
                        <span class="slider-value" id="stress-level-value">5</span>
                    </div>

                    <div class="form-group">
                        <label for="english-score">English Proficiency Score (0-120)</label>
                        <input type="range" id="english-score" min="0" max="120" step="5" value="85" class="slider">
                        <span class="slider-value" id="english-score-value">85</span>
                    </div>

                    <button id="predict-btn" class="btn btn-primary">Calculate Predicted GPA</button>
                </div>

                <!-- Prediction Result -->
                <div class="prediction-result">
                    <div id="result-placeholder" class="result-placeholder">
                        <p>Adjust the sliders and click "Calculate Predicted GPA" to see results</p>
                    </div>
                    <div id="prediction-result" class="result-box hidden">
                        <div class="result-header">
                            <h3>Predicted Semester GPA</h3>
                            <div id="predicted-gpa" class="gpa-display">-</div>
                        </div>
                        <div class="result-interpretation">
                            <h4>Interpretation</h4>
                            <p id="result-text"></p>
                        </div>
                        <div class="comparison">
                            <h4>Dataset Statistics</h4>
                            <div class="comparison-grid">
                                <div class="comp-item">
                                    <span>Mean GPA</span>
                                    <strong>2.52</strong>
                                </div>
                                <div class="comp-item">
                                    <span>Your Prediction</span>
                                    <strong id="comp-prediction">-</strong>
                                </div>
                                <div class="comp-item">
                                    <span>Difference</span>
                                    <strong id="comp-diff">-</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sample Profiles -->
            <div class="subsection">
                <h3>Sample Student Profiles</h3>
                <div class="profile-buttons">
                    <button class="profile-btn" data-profile="high-performer">
                        <strong>üåü High Performer</strong><br>
                        <small>Dedicated, organized, excellent support</small>
                    </button>
                    <button class="profile-btn" data-profile="average-performer">
                        <strong>üìä Average Performer</strong><br>
                        <small>Balanced approach, moderate effort</small>
                    </button>
                    <button class="profile-btn" data-profile="at-risk">
                        <strong>‚ö†Ô∏è At Risk</strong><br>
                        <small>Struggling with time management</small>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Course Connection -->
    <section class="section course-connection">
        <div class="container">
            <h2>Course Application: CS-GY 9223</h2>
            <p class="subtitle">Visualization for Machine Learning</p>
            
            <div class="grid grid-2">
                <div class="card">
                    <h3>Visualization Techniques Applied</h3>
                    <ul class="techniques-list">
                        <li><strong>Correlation Heatmaps</strong> - Understanding feature relationships</li>
                        <li><strong>Distribution Charts</strong> - Analyzing variable patterns</li>
                        <li><strong>Model Comparison</strong> - Visual performance evaluation</li>
                        <li><strong>Feature Importance</strong> - Identifying key predictors</li>
                        <li><strong>Interactive Dashboards</strong> - Real-time prediction exploration</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>ML Model Insights</h3>
                    <ul class="techniques-list">
                        <li><strong>Regression Models</strong> - Continuous target prediction</li>
                        <li><strong>Model Assessment</strong> - R¬≤ score, RMSE evaluation</li>
                        <li><strong>Feature Analysis</strong> - Importance and correlation</li>
                        <li><strong>Model Interpretability</strong> - Understanding predictions</li>
                        <li><strong>Visual Analytics</strong> - Actionable insights</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 ML Visualization Project | CS-GY 9223 | NYU</p>
            <p>Instructor: Claudio Silva</p>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
